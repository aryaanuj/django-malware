{% extends 'core/layout/layout.html' %}
{%load static%}

{% block title %} HOME | Request For Account {% endblock title %} 

{% block content %} 
<!-- sign up section -->
<section id="main-container">
	<div class="container py-3">
		<div class="row">
			<div class="col-md-6 mx-auto" id="signup-form">
				<div class="section-header">Request Form For Account</div>
				<br>
				<div class="myform form ">
					<form action="" method="post" class="needs-validation" novalidate>
						<div class="row">
							<div class="col-md-6">
								<div class="form-group input-group">
									<input type="text" name="first_name"  class="form-control my-input" id="firstname" placeholder="First Name" pattern='^[A-Za-z ]+' autocomplete="off" title="Only Characters are allowed" required>
									<span class="input-group-append text-danger"><h4>&nbsp;*</h4></span>
									<div class="invalid-feedback">
										Please enter valid name
									</div>
								</div>
							</div>
							<div class="col-md-6">
								<div class="form-group input-group">
									<input type="text" name="last_name"  class="form-control my-input" id="lastname" placeholder="Last Name" pattern='^[A-Za-z ]+' autocomplete="off" title="Only Characters are allowed" required>
									<span class="input-group-append text-danger"><h4>&nbsp;*</h4></span>
									<div class="invalid-feedback">
										Please enter valid last name
									</div>
								</div>
							</div>
						</div>
						<div class="form-group input-group">
							<input type="text" name="username"  class="form-control my-input" id="username" placeholder="Username" pattern='^[A-Za-z ]+' autocomplete="off" title="Only Characters are allowed" required>
							<span class="input-group-append text-danger"><h4>&nbsp;*</h4></span>
							<div class="invalid-feedback">
								Please enter valid username
							</div>
						</div>
						
						<div class="form-group input-group">
							<input type="email" name="email" class="form-control my-input" id="email" autocomplete="off" placeholder="Email Address" required>
							<span class="input-group-append text-danger"><h4>&nbsp;*</h4></span>
							<div class="invalid-feedback">
								Please enter valid email address
							</div>
						</div>
						<div class="form-group">
							<div class="input-group">
								<input type="number" name="mobile" pattern="^\d{10}$" title="Enter 10 digit mobile no. " maxlength="10" class="form-control my-input" id="mobile" autocomplete="off" placeholder="Mobile Number" onkeydown="validateNum(event, this)">
								<span class="input-group-append text-white"><h4>&nbsp;*</h4></span>
							</div>
							<div class="mobile-valid-feedback"></div>
						</div>
						
						<div class="form-group input-group">
							<input type="text" name="organization"  class="form-control my-input" id="organization" placeholder="Organization" pattern='^[A-Za-z ]+' autocomplete="off" title="Only Characters are allowed" required>
							<span class="input-group-append text-danger"><h4>&nbsp;*</h4></span>
							<div class="invalid-feedback">
								Please enter valid text
							</div>
						</div>
						
						<div class="input-group form-group">
							<input type="text" name="jobrole"  class="form-control my-input" id="jobrole" placeholder="Job Role" pattern='^[A-Za-z ]+' autocomplete="off" title="Only Characters are allowed">
							<span class="input-group-append text-white"><h4>&nbsp;*</h4></span>
							<div class="invalid-feedback">
								Please enter valid text
							</div>
						</div>
						
						<div class="row">
							<div class="form-group input-group col-md-6">
								<input type="password" name="password" id="password"  class="form-control my-input" autocomplete="off" placeholder="Password" onkeyup="CheckPassword(this)" required>
								<span class="input-group-append text-danger"><h4>&nbsp;*</h4></span>
								<div class="invalid-feedback valid-pass">
									<small class='text-danger'>Password must contain 8 to 15 characters and at least one lowercase letter, one uppercase letter, one numeric digit, and one special character</small>
								</div>
							</div>
							<div class="form-group input-group col-md-6">
								<input type="password" autocomplete="off" name="cnfpassword" id="cnfpassword"  class="form-control my-input" placeholder="Repeat Password" required>
								<span class="input-group-append text-danger"><h4>&nbsp;*</h4></span>
								<div id="cnf-msg" class="pt-2"></div>
								<div class="invalid-feedback">
									<small class='text-danger'>Password must contain 8 to 15 characters and at least one lowercase letter, one uppercase letter, one numeric digit, and one special character</small>
								</div>
							</div>
						</div>
						<div class="form-group">
							<button type="submit" class=" btn btn-warning btn-block" name="request">Send Request</button>
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>
</section>
<script type="text/javascript">
$(document).bind("contextmenu",function(e) {
	e.preventDefault();
});
// form validation
(function() {
	'use strict';
	window.addEventListener('load', function() {
		var forms = document.getElementsByClassName('needs-validation');
		var validation = Array.prototype.filter.call(forms, function(form) {
			form.addEventListener('submit', function(event) {
				if (form.checkValidity() === false) {
					event.preventDefault();
					event.stopPropagation();
				}
				form.classList.add('was-validated');
			}, false);
		});
	}, false);
})();
function CheckPassword(inputtxt)
{
	var regularExpression = /^(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{8,16}$/;
	if(inputtxt.value.match(regularExpression))
	{
		$("#password").removeClass("is-invalid");
		$("#password").addClass("is-valid");
		$(".valid-pass").html("");
	}
	else
	{
		$('form').removeClass('was-validated');
		$(".valid-pass").html("<small class='text-danger'>Password must contain 8 to 15 characters and at least one lowercase letter, one uppercase letter, one numeric digit, and one special character</small>");
		$("#password").addClass("is-invalid");
	}
}
$("#cnfpassword").keyup(function(){
	var regularExpression = /^(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{8,16}$/;
	var cnfpass = $("#cnfpassword").val();
	if(cnfpass.match(regularExpression))
	{
		var pass = $("#password").val();
		var cnf_pass = $(this).val();
		if(pass!="" && cnf_pass!="")
		{
			if(pass==cnf_pass)
			{
				$("#cnfpassword").removeClass("is-invalid");
				$("#cnfpassword").addClass("is-valid");
			}
			else
			{
				$('form').removeClass('was-validated');
				$("#cnfpassword").removeClass("is-valid");
				$("#cnfpassword").addClass("is-invalid");
			}
		}
	}else{
		$('form').removeClass('was-validated');
		$("#cnfpassword").removeClass("is-valid");
		$("#cnfpassword").addClass("is-invalid");
	}
});

var valid = false;
$("#mobile").keyup(function(){
	var val = $(this).val();
	if(val.length>10 || val.length<10){
		$(".mobile-valid-feedback").html("<small class='text-danger'>Enter 10 digits mobile no.</small>");
		$('form').removeClass('was-validated');
		$("#mobile").removeClass("is-valid");
		$("#mobile").addClass("is-invalid");
		valid = false;
	}else{
		$("#mobile").attr("style", "");
		$(".mobile-valid-feedback").html("");
		$("#mobile").removeClass("is-invalid");
		$("#mobile").addClass("is-valid");
		valid = true;
	}
});
function validateNum(event, input) {
	event.preventDefault();
	var currVal = input.value ? input.value : "";
	// Checks if the key pressed is a number and the right length
	if(!isNaN(event.key) && currVal.length < 10){
		input.value = currVal + event.key;
	}
	// Backspace functionality
	else if(event.keyCode == 8 && currVal > 0) {
		input.value = input.value.slice(0, -1);
	}
}
</script>
{% endblock content %}