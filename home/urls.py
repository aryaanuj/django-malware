from django.contrib import admin
from django.urls import path, include
from home import views
from Core.middleware.middleware import auth_middleware
from Core.forms import UserLoginForm
from django.contrib.auth import views as auth_views


urlpatterns = [

  path('', auth_middleware(views.index), name="home"),
  path('home', auth_middleware(views.index), name="home"),
  path('accounts/', include('django.contrib.auth.urls')),
  path('login',auth_middleware(auth_views.LoginView.as_view(template_name="registration/login.html",
    authentication_form=UserLoginForm)), name='login'),
  path('logout', auth_middleware(views.logout_view), name='logout'),

  path('home/profile', auth_middleware(views.profile), name="profile"),
  path('home/report', auth_middleware(views.report), name="report"),
  path('register', auth_middleware(views.register), name="register"),
 
]

handler404 = 'home.views.handler404'
# handler500 = 'home.views.handler500'